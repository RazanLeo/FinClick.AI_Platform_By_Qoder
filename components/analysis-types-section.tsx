"use client"

import { useState } from "react"
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Badge } from "@/components/ui/badge"
import { ChevronDown, ChevronUp, BarChart, TrendingUp, Brain } from "lucide-react"

const analysisTypes = {
  "التحليل الأساسي الكلاسيكي": {
    icon: BarChart,
    count: 106,
    color: "bg-blue-500",
    subcategories: {
      "التحليل الهيكلي للقوائم المالية": [
        "التحليل الرأسي - لجميع بنود القوائم المالية",
        "التحليل الأفقي - لجميع بنود القوائم المالية",
        "التحليل المختلط - لجميع بنود القوائم المالية",
        "تحليل الاتجاه",
        "التحليل المقارن الأساسي",
        "تحليل القيمة المضافة",
        "تحليل الأساس المشترك",
        "تحليل السلاسل الزمنية البسيط",
        "تحليل التغيرات النسبية",
        "تحليل معدلات النمو",
        "تحليل الانحرافات الأساسي",
        "تحليل التباين البسيط",
        "تحليل الأرقام القياسية",
      ],
      "تحليل النسب المالية": [
        "نسب السيولة (10 نسب): النسبة الجارية، النسبة السريعة، نسبة النقد، نسبة التدفق النقدي التشغيلي، نسبة رأس المال العامل، نسبة الفترة الدفاعية، نسبة التغطية النقدية، نسبة السيولة المطلقة، نسبة التدفق النقدي الحر، مؤشر السيولة الأساسي",
        "نسب النشاط/الكفاءة (15 نسبة): معدل دوران المخزون، فترة بقاء المخزون، معدل دوران الذمم المدينة، فترة التحصيل للذمم المدينة، معدل دوران الذمم الدائنة، فترة السداد للذمم الدائنة، دورة التحويل النقدي (CCC)، دورة التشغيل، معدل دوران الأصول الثابتة، معدل دوران إجمالي الأصول، معدل دوران رأس المال العامل، معدل دوران الأصول الصافية، معدل دوران رأس المال المستثمر، معدل دوران حقوق الملكية، نسبة الإنتاجية الإجمالية",
        "نسب الربحية (20 نسبة): هامش الربح الإجمالي، هامش الربح التشغيلي (EBIT Margin)، هامش صافي الربح، هامش EBITDA، العائد على الأصول (ROA)، العائد على حقوق الملكية (ROE)، العائد على رأس المال المستثمر (ROIC)، العائد على رأس المال المستخدم (ROCE)، العائد على المبيعات (ROS)، هامش التدفق النقدي التشغيلي، ربحية السهم (EPS)، نمو ربحية السهم، القيمة الدفترية للسهم، نقطة التعادل، هامش الأمان، هامش المساهمة، العائد على الأصول الصافية (RONA)، معدل النمو المستدام، مؤشر الربحية (PI)، فترة الاسترداد",
        "نسب المديونية/الرافعة (15 نسبة): نسبة الدين إلى إجمالي الأصول، نسبة الدين إلى حقوق الملكية (D/E)، نسبة الدين إلى EBITDA، نسبة تغطية الفوائد (Times Interest Earned)، نسبة تغطية خدمة الدين (DSCR)، درجة الرافعة التشغيلية (DOL)، درجة الرافعة المالية (DFL)، درجة الرافعة المدمجة (DCL)، نسبة حقوق الملكية إلى الأصول، نسبة الدين طويل الأجل، نسبة الدين قصير الأجل، مضاعف حقوق الملكية، نسبة التمويل الذاتي، نسبة الاستقلال المالي، نسبة صافي الدين",
        "نسب السوق (15 نسبة): نسبة السعر إلى الأرباح (P/E)، نسبة السعر إلى القيمة الدفترية (P/B)، نسبة السعر إلى المبيعات (P/S)، قيمة المنشأة إلى EBITDA (EV/EBITDA)، قيمة المنشأة إلى المبيعات (EV/Sales)، عائد التوزيعات (Dividend Yield)، نسبة التوزيع (Payout Ratio)، نسبة PEG، عائد الأرباح (Earnings Yield)، نسبة Q (Tobin's Q)، نسبة السعر إلى التدفق النقدي، معدل الاحتفاظ بالأرباح، القيمة السوقية إلى القيمة الدفترية، نسبة التغطية النقدية للتوزيعات، معدل نمو التوزيعات",
      ],
      "تحليلات التدفق والحركة": [
        "تحليل التدفقات النقدية (الأساسي)",
        "تحليل رأس المال العامل",
        "تحليل التدفقات الحرة (FCF)",
        "تحليل جودة الأرباح",
        "مؤشر Accruals",
        "تحليل هيكل التكاليف الثابتة",
        "تحليل هيكل التكاليف المتغيرة",
        "تحليل دوبونت الثلاثي",
        "تحليل دوبونت الخماسي",
        "القيمة المضافة الاقتصادية (EVA)",
        "القيمة السوقية المضافة (MVA)",
        "تحليل دورة النقد",
        "تحليل نقطة التعادل",
        "تحليل هامش الأمان",
        "تحليل الرافعة التشغيلية",
        "تحليل هامش المساهمة",
        "تحليل التدفق النقدي الحر للشركة FCFF",
        "تحليل التدفق النقدي لحقوق الملكية FCFE",
        "تحليل التدفقات النقدية المخصومة (DCF)",
        "تحليل صافي القيمة الحالية (NPV)",
      ],
    },
  },
  "التحليل التطبيقي المتوسط": {
    icon: TrendingUp,
    count: 21,
    color: "bg-green-500",
    subcategories: {
      "تحليلات المقارنة المتقدمة": [
        "التحليل المقارن الصناعي",
        "التحليل المقارن مع الأقران",
        "التحليل التاريخي المقارن",
      ],
      "تحليلات التقييم والاستثمار": [
        "تحليل صافي القيمة الحالية (NPV)",
        "تحليل معدل العائد الداخلي (IRR)",
        "تحليل فترة الاسترداد المخصومة",
        "تحليل التدفقات النقدية المخصومة (DCF)",
        "تحليل العائد على الاستثمار (ROI)",
        "نموذج جوردون للنمو",
        "نموذج خصم الأرباح (DDM)",
        "تحليل القيمة العادلة",
        "تحليل التكلفة والعائد",
        "تحليل الجدوى المالية",
        "تحليل المشاريع الاستثمارية",
        "التقييم بالمضاعفات",
        "المتوسط المرجح لتكلفة رأس المال (WACC)",
        "تحليل العائد على الأصول (ROA)",
      ],
      "تحليلات الأداء والكفاءة": [
        "تحليل الكفاءة التشغيلية",
        "تحليل الانحرافات المتقدم",
        "تحليل التباين والانحرافات",
        "تحليل المرونة المالية",
        "تحليل الحساسية",
      ],
    },
  },
  "التحليل المتقدم والمتطور": {
    icon: Brain,
    count: 53,
    color: "bg-purple-500",
    subcategories: {
      "النمذجة والمحاكاة": [
        "تحليل السيناريوهات المتقدم",
        "تحليل مونت كارلو",
        "النمذجة المالية المعقدة",
        "تحليل الحساسية متعدد المتغيرات",
        "تحليل شجرة القرار",
        "تحليل الخيارات الحقيقية",
        "نماذج التنبؤ المالي",
        "تحليل What-If",
        "المحاكاة العشوائية",
        "البرمجة الخطية المالية",
        "نماذج التخصيص الأمثل",
      ],
      "التحليل الإحصائي والكمي": [
        "تحليل الانحدار البسيط",
        "تحليل الانحدار المتعدد",
        "تحليل السلاسل الزمنية المتقدم",
        "نماذج ARIMA للتنبؤ",
        "نماذج GARCH للتقلبات",
        "تحليل المكونات الرئيسية (PCA)",
        "تحليل التباين (ANOVA)",
        "تحليل التكامل المشترك",
        "نماذج VAR",
        "نماذج VECM",
        "تحليل Copula للاعتمادية",
        "نظرية القيم المتطرفة (EVT)",
        "تحليل البقاء (Survival Analysis)",
        "نماذج Markov",
        "تحليل العتبة (Threshold)",
        "تحليل Bootstrap",
        "تحليل الانحدار اللوجستي",
        "تحليل التحليل العنقودي",
      ],
      "نماذج التنبؤ والتصنيف الائتماني": [
        "نموذج Altman Z-Score (للشركات المدرجة)",
        "نموذج Altman Z'-Score (للشركات الخاصة)",
        "نموذج Beneish M-Score",
        "نموذج Piotroski F-Score",
        "نموذج Springate",
        "نموذج Ohlson O-Score",
        "نموذج Zmijewski",
        "نموذج Fulmer",
        "نموذج Grover",
        "التصنيف الائتماني الداخلي",
        "نموذج CreditRisk+",
      ],
      "تحليلات المخاطر الكمية": [
        "القيمة المعرضة للخطر VaR - التاريخية",
        "القيمة المعرضة للخطر VaR - البارامترية",
        "القيمة المعرضة للخطر VaR - مونت كارلو",
        "القيمة الشرطية المعرضة للخطر CVaR",
        "العجز المتوقع (Expected Shortfall)",
        "اختبارات الإجهاد (Stress Testing)",
        "تحليل مخاطر السيولة",
        "تحليل مخاطر الائتمان",
        "تحليل مخاطر السوق",
        "تحليل مخاطر التشغيل",
        "تحليل مخاطر التركز",
        "تحليل بيتا",
        "تحليل ألفا",
        "نسبة شارب",
        "نسبة سورتينو",
        "نسبة تراينور",
        "نسبة المعلومات",
        "نسبة كالمار",
        "تحليل Drawdown",
        "تحليل التقلبات",
        "تحليل مخاطر الذيل",
        "نماذج المخاطر الائتمانية (Merton/KMV/CreditMetrics)",
        "تحليل Basel III",
        "تحليل الارتباط المتحرك",
        "اختبار رجعي للمخاطر (Backtesting)",
        "تحليل مخاطر الصرف",
      ],
      "تحليلات المحافظ والاستثمار": [
        "نظرية المحفظة الحديثة (ماركوفيتز)",
        "نموذج تسعير الأصول الرأسمالية CAPM",
        "نموذج التسعير بالمراجحة (APT)",
        "نموذج Fama-French ثلاثي العوامل",
        "نموذج Fama-French خماسي العوامل",
        "تحليل الحدود الكفؤة",
        "تحليل التنويع",
        "تحليل التخصيص الأمثل",
        "معيار كيلي",
        "تكافؤ المخاطر (Risk Parity)",
        "نموذج بلاك-ليترمان",
        "تحليل العائد المعدل بالمخاطر",
        "تحليل التتبع",
        "تحليل ICAAP",
      ],
      "تحليلات الاندماج والاستحواذ": [
        "تحليل M&A (الاندماج والاستحواذ)",
        "تحليل LBO (الاستحواذ بالرافعة)",
        "تحليل IPO (الطرح العام الأولي)",
        "تحليل إعادة الهيكلة المالية",
        "تحليل التصفية",
      ],
      "تقنيات الكشف والتنبؤ الكمي": [
        "كشف الاحتيال بالنماذج الإحصائية",
        "التنبؤ بالإفلاس (نماذج متقدمة)",
        "التنبؤ بالأزمات المالية",
        "كشف الشذوذ في البيانات المالية",
        "التنبؤ بتقلبات السوق",
        "نماذج الإنذار المبكر",
        "الشبكات العصبية للتنبؤ المالي",
        "شبكات LSTM للسلاسل الزمنية",
        "Random Forest للتصنيف الائتماني",
        "Gradient Boosting للتنبؤ",
      ],
      "التحليلات الإحصائية الزمنية": [
        "تحليل المتوسطات المتحركة",
        "التمهيد الأسي",
        "تحليل الموسمية",
        "تحليل الارتباط",
        "تحليل نقطة التحول",
        "تحليل الاتجاه الخطي وغير الخطي",
      ],
    },
  },
}

export function AnalysisTypesSection() {
  const [expandedCategory, setExpandedCategory] = useState<string | null>(null)

  return (
    <section className="py-20 neural-bg">
      <div className="container mx-auto px-4">
        <div className="text-center mb-16">
          <h2 className="text-5xl font-bold text-[#B48500] mb-6">أنواع التحليل</h2>
          <p className="text-xl text-[#8B6914] max-w-3xl mx-auto">180+ نوع تحليل مالي كمي شامل ومتقدم</p>
        </div>

        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-12">
          {Object.entries(analysisTypes).map(([category, data]) => (
            <Card key={category} className="bg-black border-[#B48500] hover-glow transition-all duration-300">
              <CardHeader className="text-center">
                <div className="mx-auto mb-4">
                  <data.icon className="w-16 h-16 text-[#B48500] animate-pulse-gold" />
                </div>
                <CardTitle className="text-xl text-[#B48500] mb-2">{category}</CardTitle>
                <Badge className={`${data.color} text-white text-lg px-4 py-2`}>{data.count} تحليل</Badge>
              </CardHeader>
              <CardContent>
                <button
                  className="w-full border border-[#B48500] text-[#B48500] hover:bg-[#B48500] hover:text-black bg-transparent p-3 rounded transition-colors"
                  onClick={() => setExpandedCategory(expandedCategory === category ? null : category)}
                >
                  {expandedCategory === category ? (
                    <>
                      إخفاء التفاصيل <ChevronUp className="w-4 h-4 mr-2 inline" />
                    </>
                  ) : (
                    <>
                      عرض التفاصيل <ChevronDown className="w-4 h-4 mr-2 inline" />
                    </>
                  )}
                </button>

                {expandedCategory === category && (
                  <div className="mt-6 space-y-4">
                    {Object.entries(data.subcategories).map(([subcategory, items]) => (
                      <div key={subcategory}>
                        <h4 className="text-lg font-semibold text-[#B48500] mb-2">{subcategory}</h4>
                        <ul className="space-y-1">
                          {items.map((item, index) => (
                            <li key={index} className="text-sm text-[#8B6914] pr-4 relative">
                              <span className="absolute right-0 top-1 w-2 h-2 bg-[#B48500] rounded-full"></span>
                              {item}
                            </li>
                          ))}
                        </ul>
                      </div>
                    ))}
                  </div>
                )}
              </CardContent>
            </Card>
          ))}
        </div>

        <div className="text-center">
          <div className="bg-black border border-[#B48500] rounded-lg p-8 max-w-2xl mx-auto">
            <h3 className="text-3xl font-bold text-[#B48500] mb-4">إجمالي التحليلات</h3>
            <div className="text-6xl font-bold text-[#B48500] mb-4">180+</div>
            <p className="text-[#8B6914] text-lg">نوع تحليل مالي كمي شامل يغطي جميع احتياجات التحليل المالي المتقدم</p>
          </div>
        </div>
      </div>
    </section>
  )
}
